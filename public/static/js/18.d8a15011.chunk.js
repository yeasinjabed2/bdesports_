(this.webpackJsonpbdesports=this.webpackJsonpbdesports||[]).push([[18],{303:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(86),c=a(1),o=a(161),l=a(12),r=a(16),d=a.n(r),i=a(21),m=a(0),b=function(e){var t=e.tournamentId,a=e.notify,s=Object(c.useContext)(i.a),o=s.refresh,l=s.setRefresh,r=Object(c.useState)(!1),b=Object(n.a)(r,2),j=b[0],u=b[1];return Object(m.jsx)("div",{className:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1",role:"dialog","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",id:"staticBackdropLabel",children:"Confirm Delete ?"}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-dismiss":"modal","aria-label":"Close"})]}),Object(m.jsx)("div",{className:"modal-body",children:Object(m.jsx)("p",{children:"Are you sure you want to delete ?"})}),Object(m.jsxs)("div",{className:"modal-footer",children:[j?Object(m.jsx)("button",{type:"button",className:"btn btn-success ","data-dismiss":"modal",disabled:!0,children:"Cancel"}):Object(m.jsx)("button",{type:"button",className:"btn btn-success ","data-dismiss":"modal",children:"Cancel"}),j?Object(m.jsx)("button",{type:"button",className:"btn btn-danger",disabled:!0,children:Object(m.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status"})}):Object(m.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(e){if(u(!0),!t)return!1;var n=document.getElementById("staticBackdrop"),s=document.querySelector(".modal-backdrop");d.a.post("".concat("https://bdesports.yeasinjabed.dev","/api/delete-tournament"),{tournament_id:t},{withCredentials:!0}).then((function(e){e.data&&(a(),l(!o),u(!1),n.classList.remove("show"),n.style.display="none",s.remove())}))},children:"Yes, Delete Tournament"})]})]})})})},j=a(3),u=a(108),x=a(4),h=function(e){var t=e.refresh,a=e.setRefresh,s=e.notifyAdd,o=Object(u.a)(),l=o.handleSubmit,r=o.register,i=o.formState.errors,b=o.reset,h=Object(c.useState)(!1),p=Object(n.a)(h,2),O=p[0],f=p[1],g=Object(x.g)(),N=function(e,n,c,o){var l=e.tournament_name,r=e.organizer_name,i=e.standings_title,m=e.group;d.a.post("".concat("https://bdesports.yeasinjabed.dev","/api/add-tournament"),{cloudName:"esportsbd2",tournamentName:l,organizerName:r,standingsTitle:i,group:m,imgData:n,imgName:c,imgSize:o},{withCredentials:!0}).then((function(e){e.data&&(a(!t),f(!1),b(),s(),document.querySelector(".modal-backdrop").remove(),g.push("/tournament/"+e.data.data._id))})).catch((function(e){e.response&&f(!1)}))};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(m.jsxs)("div",{className:"modal-content form-body-bg",children:[Object(m.jsx)("div",{className:"modal-header form-body-header",children:Object(m.jsx)("h5",{className:"modal-title text-center text-black-50 w-100 form-body-text",id:"exampleModalLongTitle",children:"Create Tournament"})}),Object(m.jsx)("div",{className:"modal-body my-4",children:Object(m.jsxs)("form",{className:"px-4",onSubmit:l((function(e){if(f(!0),e.tournament_logo.length>0){var t=e.tournament_logo[0].name,a=e.tournament_logo[0].size,n=new FileReader;n.readAsDataURL(e.tournament_logo[0]),n.addEventListener("load",(function(){N(e,n.result,t,a)}))}else N(e,"")})),children:[Object(m.jsx)("div",{className:"form-group mb-0",children:Object(m.jsx)("input",Object(j.a)({type:"text",name:"tournament_name",placeholder:"Tournament name *",className:i.tournament_name?"form-control border border-danger text-danger":"form-control form-body-input"},r("tournament_name",{required:"Tournament name is required!",minLength:{value:3,message:"Name is too short !"}})))}),i.tournament_name&&Object(m.jsx)("small",{className:"text-danger",children:i.tournament_name&&i.tournament_name.message}),Object(m.jsx)("div",{className:"form-group mt-3",children:Object(m.jsx)("input",Object(j.a)({type:"text",name:"organizer_name",placeholder:"Organizer name ",className:"form-control form-body-input"},r("organizer_name")))}),Object(m.jsx)("div",{className:"form-group mt-3",children:Object(m.jsx)("input",Object(j.a)({type:"text",name:"standings_title",placeholder:"Ex: Semi Final, Day 1, Group Name etc.",className:"form-control form-body-input"},r("standings_title")))}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsxs)("select",Object(j.a)(Object(j.a)({className:"form-control form-body-select"},r("group")),{},{children:[Object(m.jsx)("option",{value:"squad",children:"Squad"}),Object(m.jsx)("option",{value:"duo",children:"Duo"}),Object(m.jsx)("option",{value:"solo",children:"Solo"})]}))}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",Object(j.a)({type:"file",name:"tournament_logo",className:"form-body-file",accept:"image/png, image/jpeg"},r("tournament_logo")))}),O?Object(m.jsx)("button",{disabled:!0,className:"btn btn-primary w-100 mt-3 form-body-btn",children:Object(m.jsx)("div",{className:"spinner-border spinner-border-sm text-white",role:"status"})}):Object(m.jsx)("button",{className:"btn btn-primary w-100 mt-3 form-body-btn",children:"Create Now"})]})}),Object(m.jsx)("div",{className:"close d-flex justify-content-end text-right",children:Object(m.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm m-3","data-dismiss":"modal",children:"Cancel"})})]})})})})},p=function(e){var t=e.tournamentData,a=e.setTournamentId_,s=e.tournamentId_,o=e.notifyUpdate,l=Object(u.a)({defaultValues:t}),r=l.handleSubmit,b=l.register,x=l.formState.errors,h=l.reset,p=Object(c.useContext)(i.a),O=p.refresh,f=p.setRefresh,g=Object(c.useState)(!1),N=Object(n.a)(g,2),v=N[0],y=N[1],_=function(e,t,n,c){var l=e.tournament_name,r=e.organizer_name,i=e.standings_title,m=e.group;d.a.put("".concat("https://bdesports.yeasinjabed.dev","/api/update/update-tournament-data"),{cloudinaryName:"esportsbd2",_id:s,tournamentName:l,organizerName:r,standingsTitle:i,group:m,imgData:t,imgName:n,imgSize:c},{withCredentials:!0}).then((function(e){e.data&&(f(!O),y(!1),h(),o(),a(null))})).catch((function(e){e.response&&y(!1)}))};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"modal fade show",id:"exampleModalCenterEdit",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",style:{display:"block"},children:Object(m.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(m.jsxs)("div",{className:"modal-content form-body-bg",children:[Object(m.jsx)("div",{className:"modal-header form-body-header",children:Object(m.jsx)("h5",{className:"modal-title text-center text-black-50 w-100 form-body-text",id:"exampleModalLongTitle",children:"Edit"})}),Object(m.jsx)("div",{className:"modal-body my-4",children:Object(m.jsxs)("form",{className:"px-4",onSubmit:r((function(e){if(y(!0),e.tournament_logo.length>0){var t=e.tournament_logo[0].name,a=e.tournament_logo[0].size,n=new FileReader;n.readAsDataURL(e.tournament_logo[0]),n.addEventListener("load",(function(){_(e,n.result,t,a)}))}else _(e,"")})),children:[Object(m.jsx)("div",{className:"form-group mb-0",children:Object(m.jsx)("input",Object(j.a)({type:"text",name:"tournament_name",placeholder:"Tournament name *",className:x.tournament_name?"form-control border border-danger text-danger":"form-control form-body-input"},b("tournament_name",{required:"Tournament name is required!",minLength:{value:3,message:"Name is too short !"}})))}),x.tournament_name&&Object(m.jsx)("small",{className:"text-danger",children:x.tournament_name&&x.tournament_name.message}),Object(m.jsx)("div",{className:"form-group mt-3",children:Object(m.jsx)("input",Object(j.a)({type:"text",name:"organizer_name",placeholder:"Organizer name ",className:"form-control form-body-input"},b("organizer_name")))}),Object(m.jsx)("div",{className:"form-group mt-3",children:Object(m.jsx)("input",Object(j.a)({type:"text",name:"standings_title",placeholder:"Ex: Semi Final, Day 1, Group Name etc.",className:"form-control form-body-input"},b("standings_title")))}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsxs)("select",Object(j.a)(Object(j.a)({className:"form-control form-body-select"},b("group")),{},{children:[Object(m.jsx)("option",{value:"squad",children:"Squad"}),Object(m.jsx)("option",{value:"duo",children:"Duo"}),Object(m.jsx)("option",{value:"solo",children:"Solo"})]}))}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",Object(j.a)({type:"file",name:"tournament_logo",className:"form-body-file",accept:"image/png, image/jpeg"},b("tournament_logo")))}),Object(m.jsx)("button",{className:"btn btn-primary w-100 mt-3 form-body-btn",children:v?Object(m.jsx)("div",{className:"spinner-border spinner-border-sm text-white",role:"status"}):"Update"})]})}),Object(m.jsx)("div",{className:"close d-flex justify-content-end text-right",children:v?Object(m.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm m-3",disabled:!0,children:"Cancel"}):Object(m.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm m-3","data-dismiss":"modal",onClick:function(){return a(null)},children:"Cancel"})})]})})})})},O=function(e){var t=e.tournamentsData,a=e.tournamentId_,s=e.setTournamentId_,o=e.notifyUpdate,l=Object(c.useState)(null),r=Object(n.a)(l,2),d=r[0],i=r[1];return Object(c.useEffect)((function(){var e=!0;return t.forEach((function(t){t._id===a&&e&&i({group:t.group,tournament_name:t.tournamentName,organizer_name:t.organizerName,tournament_logo:"",standings_title:t.standingsTitle})})),function(){return e=!1}}),[a,t]),d&&Object(m.jsx)(p,{tournamentId_:a,setTournamentId_:s,tournamentData:d,notifyUpdate:o})};t.default=function(){var e=Object(c.useContext)(i.a),t=e.refresh,a=e.setRefresh,r=e.tournamentsData,d=Object(c.useState)([]),j=Object(n.a)(d,2),u=j[0],x=j[1],p=Object(c.useState)("all"),f=Object(n.a)(p,2),g=f[0],N=f[1],v=Object(c.useState)(""),y=Object(n.a)(v,2),_=y[0],w=y[1],C=Object(c.useState)(""),k=Object(n.a)(C,2),S=k[0],T=k[1],D=0,I=function(e){N(e.target.id)},z=function(e){T(e.target.id)},q=function(e){w(e.target.id)};return Object(c.useEffect)((function(){var e=!0;return e&&x(r),function(){e=!1}}),[r]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"container",style:{minHeight:function(){var e=window.screen.height,t=window.screen.width<600?e-152:e-80;return t+"px"}()},children:[Object(m.jsxs)("div",{className:"tournament-table-section mt-5 mb-4",children:[Object(m.jsxs)("div",{className:"table-action d-flex align-items-center justify-content-between flex-sm-column-reverse-custom",children:[Object(m.jsxs)("div",{className:"filter-section d-flex",children:[Object(m.jsxs)("div",{className:"form-check",children:[Object(m.jsx)("input",{className:"form-check-input radio-btn",type:"radio",name:"flexRadioDefault",id:"all",onChange:I,defaultChecked:!0}),Object(m.jsx)("label",{className:"form-check-label text-white",htmlFor:"All",children:"All"})]}),Object(m.jsxs)("div",{className:"form-check mx-4",children:[Object(m.jsx)("input",{className:"form-check-input radio-btn",type:"radio",name:"flexRadioDefault",id:"complete",onChange:I}),Object(m.jsx)("label",{className:"form-check-label  text-white",htmlFor:"Complete",children:"Complete"})]}),Object(m.jsxs)("div",{className:"form-check",children:[Object(m.jsx)("input",{className:"form-check-input radio-btn",type:"radio",name:"flexRadioDefault",id:"pending",onChange:I}),Object(m.jsx)("label",{className:"form-check-label text-white",htmlFor:"Pending",children:"Pending"})]})]}),Object(m.jsx)("div",{className:"add-tournament d-flex justify-content-end mb-3-custom",children:Object(m.jsx)("button",{className:"btn btn-primary-custom","data-toggle":"modal","data-target":"#exampleModalCenter",children:"+\xa0ADD TOURNAMENT"})})]}),"all"===g&&Object(m.jsxs)("div",{className:"dashboard-table-container  mt-4 p-5 px-4 rounded-3 shadow-sm",children:[Object(m.jsxs)("div",{className:"row text-center text-white mb-4",children:[Object(m.jsx)("div",{className:"col-1  p-2 d-sm-none-custom",children:"#"}),Object(m.jsx)("div",{className:"col-2 col-sm-1  p-2 ",children:"Logo"}),Object(m.jsx)("div",{className:"col-5 col-sm-6  p-2",children:"Tournament Name"}),Object(m.jsx)("div",{className:"col-2  p-2",children:"Status"}),Object(m.jsx)("div",{className:"col-3 col-sm-2  p-2",children:"Action"})]}),u.length>0?u.map((function(e,t){return D++,Object(m.jsxs)("div",{className:"row text-center border-custom",children:[Object(m.jsx)("div",{className:"col-1 d-sm-none-custom  p-2 d-flex align-items-center justify-content-center",children:D}),Object(m.jsx)("div",{className:"col-2 col-sm-1  p-2 d-flex align-items-center justify-content-center",children:e.logo_url?Object(m.jsx)(s.a,{cloudName:e.cloudinaryName?e.cloudinaryName:"esportsbd",publicId:e.logo_url,width:"50",height:"50",crop:"scale"}):Object(m.jsx)(s.a,{cloudName:"esportsbd",publicId:"upload/unnamed_qsdijm",width:"50",crop:"scale"})}),Object(m.jsxs)("div",{className:"col-5 col-sm-6  p-2 d-flex flex-column flex-md-row align-items-center justify-content-center",children:[Object(m.jsx)(l.b,{to:"/tournament/"+e._id,className:"color-primary",children:e.tournamentName}),e.standingsTitle&&Object(m.jsxs)("small",{className:"text-muted mx-2 ",children:["( ",e.standingsTitle," )"]})]}),Object(m.jsx)("div",{className:"col-2  p-2 d-flex align-items-center justify-content-center",children:e.status}),Object(m.jsx)("div",{className:"col-3 col-sm-2  p-2 d-flex align-items-center justify-content-center",children:"Ongoing"===e.status?Object(m.jsxs)("div",{className:"action-btn",children:[Object(m.jsx)("i",{className:"bi bi-pencil-square text-success fs-6 mx-3","data-toggle":"modal","data-target":"#exampleModalCenterEdit",id:e._id,onClick:z}),Object(m.jsx)("i",{className:"bi bi-trash text-danger fs-6 mx-3","data-toggle":"modal","data-target":"#staticBackdrop",id:e._id,onClick:q})]}):Object(m.jsx)("div",{className:"complete-status",children:Object(m.jsx)("i",{className:"bi bi-check2-all fs-6 text-success"})})})]},t)})):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h5",{className:"text-secondary text-center pt-4",children:"Empty"}),Object(m.jsx)("div",{className:"w-100 text-center",children:Object(m.jsx)("small",{className:"text-secondary",children:"Create a tournament first"})})]})]}),"complete"===g&&Object(m.jsxs)("div",{className:"dashboard-table-container  mt-4  p-5 px-4 rounded-3 shadow-sm",children:[Object(m.jsxs)("div",{className:"row text-center text-white mb-4",children:[Object(m.jsx)("div",{className:"col-1  p-2 d-sm-none-custom",children:"#"}),Object(m.jsx)("div",{className:"col-3 col-sm-1  p-2 ",children:"Logo"}),Object(m.jsx)("div",{className:"col-6 col-sm-8  p-2",children:"Tournament Name"}),Object(m.jsx)("div",{className:"col-3 col-sm-2  p-2",children:"Status"})]}),u.map((function(e,t){return D++,"Complete"===e.status?Object(m.jsxs)("div",{className:"row text-center border-custom ",children:[Object(m.jsx)("div",{className:"col-1 d-sm-none-custom  p-2 d-flex align-items-center justify-content-center",children:D}),Object(m.jsx)("div",{className:"col-3 col-sm-1  p-2 d-flex align-items-center justify-content-center",children:e.logo_url?Object(m.jsx)(s.a,{cloudName:e.cloudinaryName?e.cloudinaryName:"esportsbd",publicId:e.logo_url,width:"50",height:"50",crop:"scale"}):Object(m.jsx)(s.a,{cloudName:"esportsbd",publicId:"upload/unnamed_qsdijm",width:"50",crop:"scale"})}),Object(m.jsx)("div",{className:"col-6 col-sm-8  p-2 d-flex align-items-center justify-content-center",children:e.tournamentName}),Object(m.jsx)("div",{className:"col-3 col-sm-2   p-2 d-flex align-items-center justify-content-center",children:e.status})]},t):null}))]}),"pending"===g&&Object(m.jsxs)("div",{className:"dashboard-table-container  mt-4  p-5 px-4 rounded-3 shadow-sm",children:[Object(m.jsxs)("div",{className:"row text-center text-white mb-4",children:[Object(m.jsx)("div",{className:"col-1  p-2 d-sm-none-custom",children:"#"}),Object(m.jsx)("div",{className:"col-2 col-sm-1  p-2 ",children:"Logo"}),Object(m.jsx)("div",{className:"col-5 col-sm-6  p-2",children:"Tournament Name"}),Object(m.jsx)("div",{className:"col-2  p-2",children:"Status"}),Object(m.jsx)("div",{className:"col-3 col-sm-2  p-2",children:"Action"})]}),u.map((function(e,t){return D++,"Ongoing"===e.status?Object(m.jsxs)("div",{className:"row text-center border-custom ",children:[Object(m.jsx)("div",{className:"col-1 d-sm-none-custom  p-2 d-flex align-items-center justify-content-center",children:D}),Object(m.jsx)("div",{className:"col-2 col-sm-1  p-2 d-flex align-items-center justify-content-center",children:e.logo_url?Object(m.jsx)(s.a,{cloudName:e.cloudinaryName?e.cloudinaryName:"esportsbd",publicId:e.logo_url,width:"50",height:"50",crop:"scale"}):Object(m.jsx)(s.a,{cloudName:"esportsbd",publicId:"upload/unnamed_qsdijm",width:"50",crop:"scale"})}),Object(m.jsx)("div",{className:"col-5 col-sm-6  p-2 d-flex align-items-center justify-content-center",children:e.tournamentName}),Object(m.jsx)("div",{className:"col-2  p-2 d-flex align-items-center justify-content-center",children:e.status}),Object(m.jsx)("div",{className:"col-3 col-sm-2  p-2 d-flex align-items-center justify-content-center",children:Object(m.jsxs)("div",{className:"action-btn",children:[Object(m.jsx)("i",{className:"bi bi-pencil-square text-success fs-6 mx-3"}),Object(m.jsx)("i",{className:"bi bi-trash text-danger fs-6 mx-3","data-toggle":"modal","data-target":"#staticBackdrop",id:e._id})]})})]},t):null}))]})]}),Object(m.jsx)(h,{refresh:t,setRefresh:a,notifyAdd:function(){return o.b.success("Tournament has been Added !")}}),Object(m.jsx)(b,{notify:function(){return o.b.success("Tournament deleted !")},tournamentId:_}),S&&Object(m.jsx)(O,{tournamentsData:r,tournamentId_:S,setTournamentId_:T,notifyUpdate:function(){return o.b.success("Updated successfully !")}})]}),Object(m.jsx)(o.a,{})]})}}}]);