(this.webpackJsonpbdesports=this.webpackJsonpbdesports||[]).push([[23],{304:function(e,t,a){"use strict";a.r(t);var c=a(17),n=a(2),s=a(16),l=a.n(s),i=a(86),r=a(1),o=a(161),d=a(4),m=a(12),b=a(280),j=a(13),u=a(3),p=a(21),h=a(0),x=function(e){var t=e.data,a=e.notify,c=Object(r.useContext)(p.a),s=c.refresh,i=c.setRefresh,o=c.tournamentsData,m=c.updateTeamsData,b=Object(r.useState)(""),x=Object(n.a)(b,2),f=x[0],N=x[1],g=Object(r.useState)(!0),v=Object(n.a)(g,2),y=v[0],_=v[1],w=Object(d.h)().tournamentId,C=Object(r.useState)({team_select:"",place_point:10,kill_point:""}),S=Object(n.a)(C,2),k=S[0],M=S[1],D=Object(r.useState)({team_select:"",place_point:"",kill_point:""}),T=Object(n.a)(D,2),I=T[0],P=T[1],L=Object(r.useState)(!1),R=Object(n.a)(L,2),F=R[0],E=R[1],A=Object(r.useRef)(),U=Object(r.useRef)(),B=Object(r.useRef)(),q=Object(r.useRef)(),H=["",10,6,5,4,3,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],K=Object(r.useState)(null),V=Object(n.a)(K,2),J=V[0],W=V[1];function z(e){o.forEach((function(t){if(t._id===w){var c=e.kill_point,n=e.matchNo,r=e.place_point,o=e.team_select,d=e.wwcd;l.a.post("".concat("https://bdesports.yeasinjabed.dev","/api/add-point"),{tournament_id:t._id,team_id:o,matchNo:n,wwcd:d,placePoint:r,killPoint:c},{withCredentials:!0}).then((function(e){e.data&&(i(!s),_(!0),N(""),a("Added successfully!"),m(w),X(k.place_point))}))}}))}var G=function(e){if(Q(e),M(Object(u.a)(Object(u.a)({},k),{},Object(j.a)({},e.target.name,e.target.value))),e.target.value)P(Object(u.a)(Object(u.a)({},I),{},Object(j.a)({},e.target.name,"")));else{var t="place_point"===e.target.name?"Place point":"kill_point"===e.target.name&&"Kill point";P(Object(u.a)(Object(u.a)({},I),{},Object(j.a)({},e.target.name,t+" is required !")))}},Q=function(e){if("place_point"===e.target.name){var t=e.target.value&&H.indexOf(+e.target.value);W(t>0?t:null)}},X=function(e){return F?(W((function(e){return e+1})),e<3?(B.current.value=H[J+1],M(Object(u.a)(Object(u.a)({},k),{},{place_point:H[J+1],team_select:"",kill_point:""})),Y()):(e>6?(B.current.value=e-4,M(Object(u.a)(Object(u.a)({},k),{},{place_point:e-4,team_select:"",kill_point:""}))):(B.current.value=e-1,M(Object(u.a)(Object(u.a)({},k),{},{place_point:e-1,team_select:"",kill_point:""}))),Y())):Y("all")};function Y(e){"all"===e?(B.current.value="",q.current.value="",A.current.value="notSelect",M(Object(u.a)(Object(u.a)({},k),{},{team_select:"",kill_point:"",place_point:""}))):(q.current.value="",A.current.value="notSelect")}return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"modal fade",id:"exampleModalCenter2",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(h.jsxs)("div",{className:"modal-content form-body-bg",children:[Object(h.jsx)("div",{className:"modal-header form-body-header",children:Object(h.jsx)("h5",{className:"modal-title text-center text-black-50 w-100 form-body-text",id:"exampleModalLongTitle",children:"Add point"})}),Object(h.jsx)("div",{className:"modal-body my-4",children:Object(h.jsxs)("form",{className:"px-4",onSubmit:function(e){return e.preventDefault(),k.team_select&&"notSelect"!==k.team_select?""===k.place_point?P(Object(u.a)(Object(u.a)({},I),{},{place_point:"Place point is required !"})):k.kill_point?void t.forEach((function(e){if(e._id===k.team_select){_(!1);var t=Object(u.a)(Object(u.a)({},k),{},{matchNo:e.matchNo+1});if(k.place_point>6)z(Object(u.a)(Object(u.a)({},t),{},{wwcd:1}));else z(Object(u.a)(Object(u.a)({},t),{},{wwcd:0}))}})):P(Object(u.a)(Object(u.a)({},I),{},{kill_point:"Kill point is required !"})):P(Object(u.a)(Object(u.a)({},I),{},{team_select:"Select a team !"}))},ref:U,children:[Object(h.jsxs)("div",{className:"row",children:[(f||0===f)&&Object(h.jsx)("label",{htmlFor:"Match",className:"mb-2 text-success",children:Object(h.jsxs)("small",{children:["Add point for Match ",f+1]})}),Object(h.jsx)("div",{className:"form-group mb-0",children:Object(h.jsxs)("select",{className:I.team_select?"form-control border border-danger text-danger":"form-control form-body-select",onChange:function(e){"notSelect"===e.target.value&&N(""),t.forEach((function(t){t._id===e.target.value&&N(t.matchNo)})),M(Object(u.a)(Object(u.a)({},k),{},{team_select:e.target.value})),P(Object(u.a)(Object(u.a)({},I),{},{team_select:""}))},ref:A,children:[Object(h.jsx)("option",{value:"notSelect",children:"Select a team"}),t.map((function(e,t){return Object(h.jsx)("option",{value:e._id,data:e.matchNo,children:e.teamName},t)}))]})})]}),I.team_select&&Object(h.jsx)("small",{className:"text-danger",children:I.team_select}),Object(h.jsxs)("div",{className:"form-group mb-0 mt-3 point-group-auto-wrapper",children:[F?Object(h.jsx)("input",{type:"number",placeholder:"Place points *",className:I.place_point?"form-control border border-danger text-danger":"form-control form-body-input border-bottom-left-right-6",onChange:G,defaultValue:k.place_point,name:"place_point",ref:B,disabled:!0}):Object(h.jsx)("input",{type:"number",placeholder:"Place points *",className:I.place_point?"form-control border border-danger text-danger":"form-control form-body-input border-bottom-left-right-6",onChange:G,defaultValue:k.place_point,name:"place_point",ref:B}),Object(h.jsx)(O,{placePositionNumber:J,autoSelect:F,handleAutoSelect:function(e){if(e.target.checked)if(E(!0),k.place_point<11&&""!==k.place_point){var t=k.place_point&&H.indexOf(+k.place_point);W(t>0?t:null)}else B.current.value=10,M(Object(u.a)(Object(u.a)({},k),{},{place_point:10})),W(H.indexOf(10)),P(Object(u.a)(Object(u.a)({},I),{},{place_point:""}));else E(!1)},handlePlacePointReset:function(){var e=document.querySelector(".bi-arrow-repeat");e.classList.add("rotate-icon"),setTimeout((function(){e.classList.remove("rotate-icon")}),1100),M(Object(u.a)(Object(u.a)({},k),{},{place_point:10})),B.current.value=10,W(1)}})]}),I.place_point&&Object(h.jsx)("small",{className:"text-danger",children:I.place_point}),Object(h.jsx)("div",{className:"form-group mb-0 mt-3",children:Object(h.jsx)("input",{type:"Number",placeholder:"Kill points *",className:I.kill_point?"form-control border border-danger text-danger":"form-control form-body-input",onChange:G,name:"kill_point",ref:q})}),I.kill_point&&Object(h.jsx)("small",{className:"text-danger",children:I.kill_point}),Object(h.jsx)("button",{className:"btn btn-primary w-100 mt-4 form-body-btn",children:y?"Add ":Object(h.jsx)("div",{className:"spinner-border spinner-border-sm text-white",role:"status"})})]})}),Object(h.jsx)("div",{className:"close d-flex justify-content-end text-right",children:Object(h.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm m-3","data-dismiss":"modal",children:"Cancel"})})]})})})})},O=function(e){var t=e.placePositionNumber,a=e.autoSelect,c=e.handleAutoSelect,n=e.handlePlacePointReset;return Object(h.jsxs)("div",{className:"point-auto-wrapper d-flex justify-content-end mx-2",children:[Object(h.jsx)("div",{className:"position-wrapper mr-auto d-flex align-items-center",style:{marginRight:"auto"},children:t&&a&&Object(h.jsxs)("small",{children:["Position ",t]})}),Object(h.jsxs)("div",{className:"auto-btn d-flex align-items-center auto-select-container mx-2",children:[Object(h.jsx)("small",{className:"text-dark mx-1",children:"Auto"}),Object(h.jsx)("div",{className:"form-check form-switch d-flex align-items-center",children:Object(h.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:c})})]}),Object(h.jsxs)("div",{className:"reset-btn d-flex align-items-center",onClick:n,children:[Object(h.jsx)("small",{className:"text-dark mx-1",children:"Reset "}),Object(h.jsx)("i",{className:"bi bi-arrow-repeat"})]})]})},f=a(108),N=function(e){var t=e.notify,a=Object(r.useState)(!1),c=Object(n.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(!1),m=Object(n.a)(o,2),b=m[0],j=m[1],x=Object(r.useContext)(p.a),O=x.refresh,N=x.setRefresh,g=x.tournamentsData,v=x.updateTeamsData,y=Object(d.h)().tournamentId,_=Object(f.a)(),w=_.register,C=_.handleSubmit,S=_.formState.errors,k=_.reset,M=function(e,a,c,n){g.forEach((function(s){s._id===y&&l.a.post("".concat("https://bdesports.yeasinjabed.dev","/api/add-team"),{cloudName:"esportsbd2",teamName:e.teamName,tournament_id:s._id,imgData:a,imgName:c,imgSize:n},{withCredentials:!0}).then((function(e){e.data&&(N(!O),j(!1),k(),t("Added successfully!"),v(y))})).catch((function(e){e.response&&(i(e.response.data.msg),j(!1))}))}))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(h.jsxs)("div",{className:"modal-content form-body-bg",children:[Object(h.jsx)("div",{className:"modal-header form-body-header",children:Object(h.jsx)("h5",{className:"modal-title text-center text-black-50 w-100 form-body-text",id:"exampleModalLongTitle",children:"Add Team"})}),Object(h.jsx)("div",{className:"modal-body my-4",children:Object(h.jsxs)("form",{className:"px-4",onSubmit:C((function(e){if(j(!0),e.teamLogo.length>0){var t=e.teamLogo[0].name,a=e.teamLogo[0].size,c=new FileReader;c.readAsDataURL(e.teamLogo[0]),c.addEventListener("load",(function(){M(e,c.result,t,a)}))}else M(e,"")})),children:[Object(h.jsx)("div",{className:"form-group mb-0",children:Object(h.jsx)("input",Object(u.a)(Object(u.a)({type:"text",name:"team_name",placeholder:"Team name *",className:S.teamName||s?"form-control border border-danger text-danger":"form-control form-body-input"},w("teamName",{required:"Team name is required !",minLength:{value:2,message:"Name is too short !"}})),{},{onChange:function(e){i("")}}))}),(S.teamName||s)&&Object(h.jsx)("small",{className:"text-danger",children:S.teamName&&S.teamName.message||s}),Object(h.jsx)("div",{className:"form-group mt-3",children:Object(h.jsx)("input",Object(u.a)({type:"file",name:"teamLogo_logo",className:"form-body-file"},w("teamLogo")))}),Object(h.jsx)("button",{className:"btn btn-primary w-100 mt-3 form-body-btn",children:b?Object(h.jsx)("div",{className:"spinner-border spinner-border-sm text-white",role:"status"}):"Add"})]})}),Object(h.jsx)("div",{className:"close d-flex justify-content-end text-right",children:Object(h.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm m-3","data-dismiss":"modal",children:"Cancel"})})]})})})})},g=a(40),v=a(41),y=a(42),_=a(43),w=function(e){var t=e.setDeleteConfirm,a=e.handleDelete;return Object(h.jsx)("div",{className:"modal fade show",style:{display:"block"},children:Object(h.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(h.jsxs)("div",{className:"modal-content mx-5 shadow",children:[Object(h.jsxs)("div",{className:"modal-header py-2",children:[Object(h.jsx)("h6",{className:"modal-title",id:"staticBackdropLabel",children:"Confirm Delete ?"}),Object(h.jsx)("button",{type:"button",className:"btn-close",onClick:function(){return t(!1)}})]}),Object(h.jsx)("div",{className:"modal-body my-2",children:Object(h.jsx)("p",{children:"Are you sure you want to delete ?"})}),Object(h.jsxs)("div",{className:"action-btn d-flex justify-content-end m-3",children:[Object(h.jsx)("button",{className:"btn btn-secondary btn-sm mx-3",onClick:function(){return t(!1)},children:"Cancel"}),Object(h.jsx)("button",{className:"btn btn-danger btn-sm",onClick:a,children:"Delete"})]})]})})})},C=function(e){var t=e.data,a=e.notify,c=Object(r.useContext)(p.a),s=c.tournamentsData,i=c.setRefresh,o=c.refresh,m=c.updateTeamsData,b=Object(r.useState)(!1),j=Object(n.a)(b,2),u=j[0],x=j[1],O=Object(r.useState)(),f=Object(n.a)(O,2),N=f[0],g=f[1],v=Object(d.h)().tournamentId,y=function(e){g(e.target.parentElement.id),x(!0)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"modal fade",id:"exampleModalCenter4",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(h.jsxs)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:[u&&Object(h.jsx)(w,{setDeleteConfirm:x,handleDelete:function(e){s.forEach((function(e){e._id===v&&l.a.post("".concat("https://bdesports.yeasinjabed.dev","/api/delete-tournament-team"),{team_id:N,tournament_id:e._id},{withCredentials:!0}).then((function(e){e.data&&(i(!o),a("Delete successfully"),x(!1),m(v))}))}))}}),Object(h.jsxs)("div",{className:"modal-content form-body-bg",children:[Object(h.jsxs)("div",{className:"modal-header form-body-header py-2",children:[Object(h.jsx)("h5",{className:"modal-title text-center form-body-text text-black-50 w-100",id:"exampleModalLongTitle",children:"Delete Team"}),Object(h.jsx)("button",{type:"button",className:"btn-close","data-dismiss":"modal","aria-label":"Close"})]}),Object(h.jsx)("div",{className:"modal-body my-2 delete-team",children:t.map((function(e,t){return Object(h.jsxs)("div",{className:"row py-2 mx-3 border-bottom",children:[Object(h.jsx)("div",{className:"col-7 text-light",children:e.teamName[0]}),Object(h.jsx)("div",{className:"col-5 text-center",id:e._id,children:Object(h.jsx)("i",{className:"bi bi-trash fs-5 text-danger",onClick:y})})]},t)}))})]})]})})})},S=function(e){var t=e.data,a=e.notify,s=Object(r.useContext)(p.a),i=s.tournamentsData,o=s.refresh,m=s.setRefresh,b=s.updateTeamsData,x=Object(r.useState)(!1),O=Object(n.a)(x,2),f=O[0],N=O[1],g=Object(r.useState)(!1),v=Object(n.a)(g,2),y=v[0],_=v[1],w=Object(r.useState)([]),C=Object(n.a)(w,2),S=C[0],k=C[1],M=Object(r.useState)([]),D=Object(n.a)(M,2),T=D[0],I=D[1],P=Object(r.useState)([]),L=Object(n.a)(P,2),R=L[0],F=L[1],E=Object(r.useState)(!1),A=Object(n.a)(E,2),U=A[0],B=A[1],q=Object(r.useState)(!1),H=Object(n.a)(q,2),K=H[0],V=H[1],J=Object(r.useState)(!1),W=Object(n.a)(J,2),z=W[0],G=W[1],Q=Object(d.h)().tournamentId,X=function(e){V(!1);var t,a=e.target,c=a.name,n=a.value;if(F([Object(u.a)(Object(u.a)({},R[0]),{},Object(j.a)({},c,parseInt(n)?parseInt(n):n))]),"placePoint"===c&&n>6)0===R[0].wwcd&&F([Object(u.a)(Object(u.a)({},R[0]),{},(t={},Object(j.a)(t,c,parseInt(n)?parseInt(n):n),Object(j.a)(t,"wwcd",1),t))]);else if("placePoint"===c&&n<7){var s;if(1===R[0].wwcd)F([Object(u.a)(Object(u.a)({},R[0]),{},(s={},Object(j.a)(s,c,parseInt(n)?parseInt(n):n),Object(j.a)(s,"wwcd",0),s))])}};return Object(r.useEffect)((function(){i.forEach((function(e){e._id===Q&&l.a.post("".concat("https://bdesports.yeasinjabed.dev","/api/get-all-team-data"),{tournament_id:e._id},{withCredentials:!0}).then((function(e){e.data&&k(e.data.data)}))}))}),[o,i,Q]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"modal fade",id:"exampleModalCenter3",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsxs)("div",{className:"modal-header  p-2 px-3",children:[Object(h.jsx)("h5",{className:"modal-title text-center text-black-50 w-100",id:"exampleModalLongTitle",children:"Update"}),Object(h.jsx)("button",{type:"button",className:"btn-close","data-dismiss":"modal","aria-label":"Close",onClick:function(){F([]),V(!1)}})]}),Object(h.jsx)("div",{className:"modal-body my-4 mt-3",children:Object(h.jsxs)("form",{className:"px-4",children:[Object(h.jsxs)("div",{className:"select-section d-flex justify-content-center mb-3",children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsxs)("select",{className:"form-control",onChange:function(e){if("notSelect"===e.target.value)return _(!1),I([]),void F([]);_(!0),I([]),F([]),S.forEach((function(t){t.team_id===e.target.value&&I((function(e){return[].concat(Object(c.a)(e),[t])}))}))},children:[Object(h.jsx)("option",{value:"notSelect",children:"Select a team"}),t.map((function(e,t){return Object(h.jsx)("option",{value:e._id,children:e.teamName},t)}))]})}),Object(h.jsx)("div",{className:"form-group mx-3",children:y?Object(h.jsxs)("select",{className:"form-control",onChange:function(e){if("notSelect"===e.target.value)return N(!1),void F([]);N(!0),F([]),T.forEach((function(a){a._id===e.target.value&&t.forEach((function(e){if(e._id===a.team_id){var t=Object(u.a)(Object(u.a)({},a),{},{teamName:e.teamName[0]});F((function(e){return[].concat(Object(c.a)(e),[t])}))}}))}))},children:[Object(h.jsx)("option",{value:"notSelect",children:"Select match"}),T.map((function(e,t){var a=10*Math.random();return e.matchNo>0?Object(h.jsx)("option",{value:e._id,children:"Match #"+e.matchNo},a):null}))]}):Object(h.jsx)("select",{className:"form-control",disabled:!0,children:Object(h.jsx)("option",{children:"Select match"})})})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-12 col-sm-3 mb-1 mb-sm-0 px-2 px-sm-0 d-flex align-items-center edit-table-header",children:"Team Name :"}),Object(h.jsx)("div",{className:"col-12 col-sm-9 px-2 px-sm-0",children:Object(h.jsx)("div",{className:"form-group mb-0",children:R.length>0?R.map((function(e,t){return Object(h.jsx)("input",{type:"text",className:K?"form-control border-danger text-danger":"form-control",defaultValue:e.teamName,name:"teamName",onChange:X},t)})):Object(h.jsx)("input",{type:"text",className:"form-control",disabled:!0})})}),K&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"col-0 col-sm-3"}),Object(h.jsx)("div",{className:"col-12 col-sm-9 px-2 px-sm-0",children:Object(h.jsx)("small",{className:"text-danger",children:K})})]})]}),Object(h.jsxs)("div",{className:"row text-center mt-4 mb-3 bg-light edit-table-header",children:[Object(h.jsx)("div",{className:"col-4",children:"match no"}),Object(h.jsx)("div",{className:"col-2 px-1",children:"wwcd"}),Object(h.jsx)("div",{className:"col-2",children:"place"}),Object(h.jsx)("div",{className:"col-2 px-1",children:"kill"}),Object(h.jsx)("div",{className:"col-2 px-1",children:"action"})]}),U?Object(h.jsx)("div",{className:"undo-btn d-flex justify-content-center",children:Object(h.jsx)("button",{className:"btn btn-outline-warning mx-auto",onClick:function(){return B(!1)},children:"Undo"})}):R.map((function(e,t){var a=10*Math.random();return e.matchNo>0?Object(h.jsxs)("div",{className:"row mb-2",children:[Object(h.jsx)("div",{className:"col-4 d-flex align-items-center justify-content-center",children:"Match #"+e.matchNo}),Object(h.jsx)("div",{className:"col-2 px-1",children:Object(h.jsx)("div",{className:"form-group mb-0",children:Object(h.jsx)("input",{type:"number",className:"form-control",defaultValue:e.wwcd,disabled:!0})})}),Object(h.jsx)("div",{className:"col-2 px-1",children:Object(h.jsx)("div",{className:"form-group mb-0",children:Object(h.jsx)("input",{type:"number",className:"form-control",defaultValue:e.placePoint,name:"placePoint",onChange:X})})}),Object(h.jsx)("div",{className:"col-2 px-1",children:Object(h.jsx)("div",{className:"form-group mb-0",children:Object(h.jsx)("input",{type:"number",className:"form-control",defaultValue:e.killPoint,name:"killPoint",onChange:X})})}),Object(h.jsx)("div",{className:"col-2 px-1 d-flex align-items-center justify-content-center text-danger",id:e._id,children:Object(h.jsx)("i",{className:"bi bi-trash fs-5",onClick:function(){return B(!0)}})})]},a):null})),Object(h.jsxs)("div",{className:"button d-flex justify-content-end mt-4 pt-2 border-top",children:[z?Object(h.jsx)("button",{className:"btn btn-danger btn-sm mx-2 ","data-dismiss":"modal",disabled:!0,children:"Cancel"}):Object(h.jsx)("button",{className:"btn btn-danger btn-sm mx-2 ","data-dismiss":"modal",onClick:function(){F([]),V(!1)},children:"Cancel"}),f?Object(h.jsx)("button",{className:"btn btn-success btn-sm",onClick:function(e){if(e.preventDefault(),!R[0].teamName.trim())return V("Name is required !");if(R[0].teamName.trim().length<2)return V("Name is too short !");V(!1),G(!0);var t=R[0],c=t._id,n=t.team_id,s=t.killPoint,i=t.placePoint,r=t.wwcd,d=t.teamName;U?l.a.post("".concat("https://bdesports.yeasinjabed.dev","/api/delete/delete-match"),{_id:c,team_id:n,tournament_id:Q},{withCredentials:!0}).then((function(e){e.data&&(G(!1),m(!o),a("Updated !"),F([]),B(!1),b(Q))})):l.a.put("".concat("https://bdesports.yeasinjabed.dev","/api/update/update-team-match-data"),{match_id:c,team_id:n,tournament_id:Q,killPoint:s,placePoint:i,wwcd:r,teamName:d},{withCredentials:!0}).then((function(e){e.data&&(G(!1),b(Q),a("Updated !"),F([]),N(!1))})).catch((function(e){e.response&&(V(e.response.data.msg),G(!1))}))},children:z?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{className:"mx-2",children:"Update"}),Object(h.jsx)("div",{className:"spinner-border spinner-border-sm text-white",role:"status"})]}):"Update"}):Object(h.jsx)("button",{className:"btn btn-success btn-sm",disabled:!0,children:"Update"})]})]})})]})})})})},k=a(7),M=a(6),D=a(14),T=function(e){var t=e.tournamentId,a=e.setHideEditForm,c=e.previewBtn,s=e.disableTop3Button,l=e.data,i=e.setCertificateModal,o=e.setFixtureModal,d=e.mvpModal,m=e.setMvpModal,j=e.killLeadersModal,u=e.setKillLeadersModal,p=e.dorpDownList,x=e.listItems,O=e.previewUrl,f=e.userData,N=e.bannerUrl,w=e.fixtureModal,C=e.certificateModal,S=Object(r.useState)(!1),M=Object(n.a)(S,2),T=M[0],I=M[1],P=Object(r.useState)(!1),L=Object(n.a)(P,2),R=L[0],F=L[1],E=Object(r.useState)(!1),A=Object(n.a)(E,2),U=A[0],B=A[1],q=Object(r.useState)(!1),H=Object(n.a)(q,2),K=H[0],V=H[1],J=Object(r.useState)(!1),W=Object(n.a)(J,2),z=W[0],G=W[1],Q=Object(r.useState)(!1),X=Object(n.a)(Q,2),Y=X[0],Z=X[1],$=Object(r.useState)(!1),ee=Object(n.a)($,2),te=ee[0],ae=ee[1],ce=JSON.parse(localStorage.getItem("update"));function ne(e){var t=ce.find((function(e){return e._id===f._id}));if(t)return t.updateData.find((function(t){return t.catName===e}))}function se(){var e=localStorage.getItem("update_id"),t=c.length,a=ce&&ce.filter((function(t){return t._id===e})),n=a&&x.map((function(e){return a[0]?a[0].updateData.filter((function(t){return t.catName===e.catName?t.styles.length===e.listNames.length:null})):null})),s=n&&n.find((function(e){return e?0===e.length:[]})),l=le(a,"Table",t),i=le(a,"fixture",5),r=le(a,"certificate",3),o=le(a,"mvp",1),d=le(a,"killLeaders",3);F(void 0!==s),l&&l.length>0?B(!1):B(!0),i&&i.length>0?Z(!1):Z(!0),r&&r.length>0?ae(!1):ae(!0),o&&o.length>0?V(!1):V(!0),d&&d.length>0?G(!1):G(!0)}function le(e,t,a){return e&&e[0]&&e[0].updateData.filter((function(e){return e.catName===t?e.styles.length===a:null}))}return Object(r.useEffect)((function(){se()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"add-tournament d-flex flex-column flex-sm-row text-center justify-content-between mb-4 mt-4 mx-auto",children:[Object(h.jsxs)("div",{className:"mb-3 mb-sm-0 d-flex justify-content-center",children:[Object(h.jsx)("button",{className:"btn btn-primary-custom btn-sm ","data-toggle":"modal","data-target":"#exampleModalCenter",children:"+\xa0 Add Team"}),Object(h.jsx)("button",{className:"btn btn-primary-custom btn-sm mx-3","data-toggle":"modal","data-target":"#exampleModalCenter2",children:"+\xa0 Add Point"}),l.length>4?Object(h.jsxs)("div",{className:"dropdown",children:[Object(h.jsxs)("button",{className:"btn btn-warning btn-sm dropdown-toggle d-none d-md-block",type:"button",id:"dropdownMenuButton1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[Object(h.jsx)("i",{className:"bi bi-star"}),"\xa0 Banner",(R||Y||te||K||z)&&Object(h.jsx)(k.a,{})]}),Object(h.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(h.jsx)("ul",{className:"banner-dropdown",children:p.map((function(e,a){if(s>e.minTeam){var c=ce&&ne(e.name),n=c&&c.styles.length,l=x.find((function(t){return e.name===t.catName})),i=l&&l.listNames.length;return Object(h.jsxs)("li",{className:n===i?"dropdown-item":"dropdown-item active",children:[e.name,Object(h.jsx)("ul",{children:x.map((function(a){return e.name===a.catName?a.listNames.map((function(a,c){var n=ce&&ne(e.name);return Object(h.jsx)("li",{name:e.name,children:Object(h.jsx)("a",{href:O+e.catPath+"/"+t+a.path,target:"_blank",rel:"noreferrer",className:n&&-1!==n.styles.indexOf(c)?"":"active",onClick:function(e){return Object(D.a)(e,f,ce,T,I,se)},id:c,children:a.name})},c)})):null}))})]},a)}return null}))}),s>1&&Object(h.jsxs)("div",{className:"btn btn-secondary px-4 rounded-0 w-100 mb-1 position-relative","data-toggle":"modal","data-target":"#mvp",onClick:function(){return m(!0)},children:["MVP ",K&&Object(h.jsx)(k.a,{})]}),s>1&&Object(h.jsxs)("div",{className:"btn btn-secondary px-2 rounded-0 w-100 mb-1 position-relative","data-toggle":"modal","data-target":"#kill-leaders",onClick:function(){return u(!0)},children:["Kill Leaders ",z&&Object(h.jsx)(k.a,{})]}),s>1&&Object(h.jsxs)("div",{className:"btn btn-secondary px-4 rounded-0 w-100 mb-1 position-relative","data-toggle":"modal","data-target":"#fixtureModal",onClick:function(){return o(!0)},children:["Fixture ",Y&&Object(h.jsx)(k.a,{})]}),s>1&&Object(h.jsxs)("div",{className:"btn btn-secondary px-4 rounded-0 position-relative","data-toggle":"modal","data-target":"#certificate",onClick:function(){return i(!0)},children:["Certificate ",te&&Object(h.jsx)(k.a,{})]})]})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{"data-tip":"Add minimum 5 teams to enable this button",children:Object(h.jsxs)("button",{className:"btn btn-warning btn-sm dropdown-toggle d-none d-md-block",type:"button",disabled:!0,children:[Object(h.jsx)("i",{className:"bi bi-star"}),"\xa0 Banner"]})}),Object(h.jsx)(b.a,{type:"light"})]})]}),Object(h.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(h.jsxs)("button",{className:"btn btn-outline-light btn-sm ","data-toggle":"modal","data-target":"#exampleModalCenter3",onClick:function(){return a(!0)},children:[Object(h.jsx)("i",{className:"bi bi-pencil-square"}),"\xa0 Edit"]}),Object(h.jsxs)("button",{className:"btn btn-outline-light btn-sm  mx-3","data-toggle":"modal","data-target":"#exampleModalCenter4",children:[Object(h.jsx)("i",{className:"bi bi-trash"}),"\xa0 Delete"]}),l.length>4?Object(h.jsxs)("div",{className:"dropdown",children:[Object(h.jsxs)("button",{className:"btn btn-success btn-sm dropdown-toggle d-none d-md-block",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:["Point Tables",U&&Object(h.jsx)(k.a,{})]}),Object(h.jsx)("div",{className:"dropdown-menu table-dropdown","aria-labelledby":"dropdownMenuButton",name:"Table",children:c.map((function(e,a){var c=ce&&ne("Table");return Object(h.jsx)("a",{href:O+"/point_table/"+t+e.path,target:"_blank",rel:"noreferrer",id:a,onClick:function(e){return Object(D.a)(e,f,ce,T,I,se)},className:c&&-1!==c.styles.indexOf(a)?"dropdown-item":"dropdown-item active",children:e.name},a)}))})]}):Object(h.jsx)("span",{"data-tip":"Add minimum 5 team to enable this button",children:Object(h.jsx)("button",{className:"btn btn-success btn-sm dropdown-toggle d-none d-md-block",type:"button",disabled:!0,children:"Point Tables"})})]})]}),w&&Object(h.jsx)(v.a,{bannerUrl:N,updateNotifyDotHide:se,storageData:ce,findItems:ne,refresh:T,setRefresh:I}),C&&Object(h.jsx)(g.a,{data:l,bannerUrl:N,storageData:ce,findItems:ne,updateNotifyDotHide:se,refresh:T,setRefresh:I}),d&&Object(h.jsx)(_.a,{data:l,bannerUrl:N,storageData:ce,findItems:ne,updateNotifyDotHide:se,refresh:T,setRefresh:I}),j&&Object(h.jsx)(y.a,{data:l,bannerUrl:N,storageData:ce,findItems:ne,updateNotifyDotHide:se,refresh:T,setRefresh:I})]})},I=function(e){var t=e.data,a=e.loading,c=e.count,n=e.tournamentId;return Object(h.jsxs)("div",{className:"score-table mx-auto team-view-table",children:[Object(h.jsx)("div",{className:"score-table-header text-center text-white mb-2",children:Object(h.jsxs)("div",{className:"row mx-1",children:[Object(h.jsx)("div",{className:"col-1",children:"Rank"}),Object(h.jsx)("div",{className:"col-4",children:"Team"}),Object(h.jsx)("div",{className:"col-2",children:"M"}),Object(h.jsx)("div",{className:"col-2",children:"WWCD"}),Object(h.jsx)("div",{className:"col-2",children:"Place"}),Object(h.jsx)("div",{className:"col-2",children:"Kill"}),Object(h.jsx)("div",{className:"col-2",children:"Total"})]})}),a?Object(h.jsx)("div",{className:"text-center py-5",children:Object(h.jsx)("div",{className:"spinner-border text-primary",style:{width:"3rem",height:"3rem"},role:"status"})}):Object(h.jsxs)(h.Fragment,{children:[t.length>0&&t.map((function(e,t){return c++,Object(h.jsxs)("div",{className:"row border-custom text-center py-3 mx-1",children:[Object(h.jsxs)("div",{className:"col-1 d-flex align-items-center justify-content-center",children:["#",c]}),Object(h.jsxs)("div",{className:"col-4 text-start d-flex align-items-center",children:[e.logo_url[0]?window.screen.width<600?Object(h.jsx)(i.a,{cloudName:e.cloudinaryName[0]?e.cloudinaryName[0]:"esportsbd",publicId:e.logo_url[0],width:"30",crop:"scale"}):Object(h.jsx)(i.a,{cloudName:e.cloudinaryName[0]?e.cloudinaryName[0]:"esportsbd",publicId:e.logo_url[0],width:"40",crop:"scale"}):window.screen.width<600?Object(h.jsx)(i.a,{cloudName:"esportsbd",publicId:"upload/unnamed_qsdijm",width:"26",crop:"scale"}):Object(h.jsx)(i.a,{cloudName:"esportsbd",publicId:"upload/unnamed_qsdijm",width:"36",crop:"scale"}),Object(h.jsx)(m.b,{className:"text-white",to:"/tournament/"+n+"/team/"+e.teamName,children:Object(h.jsx)("div",{className:"mx-2 name-filed",children:e.teamName})})]}),Object(h.jsx)("div",{className:"col-2 d-flex align-items-center justify-content-center",children:e.matchNo}),Object(h.jsx)("div",{className:"col-2 d-flex align-items-center justify-content-center",children:e.wwcd}),Object(h.jsx)("div",{className:"col-2 d-flex align-items-center justify-content-center",children:e.placePoint}),Object(h.jsx)("div",{className:"col-2 d-flex align-items-center justify-content-center",children:e.killPoint}),Object(h.jsx)("div",{className:"col-2 d-flex align-items-center justify-content-center",children:e.totalPoint})]},t)})),0===t.length&&Object(h.jsx)("div",{className:"empty-container",children:Object(h.jsx)("div",{className:"bg-white py-5",children:Object(h.jsxs)("div",{className:"text-center text-muted d-flex align-items-center justify-content-center",children:[Object(h.jsxs)("span",{style:{color:"red",fontFamily:"Roboto",fontWeight:"bold",marginRight:"5px"},children:["Tips :","  "]}),"  ","Add at least 5 teams to see all the #Banners nicely"]})})})]})]})};t.default=function(){var e=Object(r.useContext)(p.a),t=e.tournamentsData,a=e.teamsData,s=e.setTeamsData,i=e.refresh,m=e.setRefresh,b=Object(r.useContext)(M.a).userData,j=Object(r.useState)(!0),u=Object(n.a)(j,2),O=u[0],f=u[1],g=Object(r.useState)(!1),v=Object(n.a)(g,2),y=v[0],_=v[1],w=Object(d.h)().tournamentId,k=Object(d.g)(),D=Object(r.useState)([]),P=Object(n.a)(D,2),L=P[0],R=P[1],F=Object(r.useState)(!1),E=Object(n.a)(F,2),A=E[0],U=E[1],B=Object(r.useState)(!1),q=Object(n.a)(B,2),H=q[0],K=q[1],V=Object(r.useState)(!1),J=Object(n.a)(V,2),W=J[0],z=J[1],G=Object(r.useState)(!1),Q=Object(n.a)(G,2),X=Q[0],Y=Q[1],Z=L.length,$=window.location.href.split("/")[0],ee=window.location.href.split("/")[2],te="".concat($,"//").concat(ee,"/tournament/preview"),ae="".concat($,"//").concat(ee,"/tournament/team"),ce=function(e){return o.b.success(e)},ne=Object(r.useCallback)((function(e){var t=e.map((function(e){return{_id:e._id,teamName:e.teamName,logo:e.logo_url,cloudinaryName:e.cloudinaryName[0]}}));t.push({tournamentId:w}),localStorage.setItem("top",JSON.stringify(t)),m(!i)}),[w]);return Object(r.useEffect)((function(){var e=!0,t=a.filter((function(e){return e.tournamentId===w}));return t.length>0?(t.forEach((function(e){e.tournamentId===w&&(R(e.data),ne(e.data),f(!1))})),!1):(l.a.post("".concat("https://bdesports.yeasinjabed.dev","/api/get-team-data"),{tournamentId:w},{withCredentials:!0}).then((function(t){if(t.data&&e){var a={tournamentId:w,data:t.data.teamsData};R(t.data.teamsData),s((function(e){return[].concat(Object(c.a)(e),[a])})),ne(t.data.teamsData),f(!1)}})),function(){return e=!1})}),[t,ne,i,s,a,w]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"container mb-5",style:{minHeight:function(){var e=window.screen.height,t=window.screen.width<600?e-112:e-40;return t+"px"}()},children:[Object(h.jsx)("div",{className:"back-btn-wrapper mx-auto",children:Object(h.jsx)("div",{className:"back-button text-white mt-2 mx-3 mx-sm-0 ",children:Object(h.jsx)("i",{className:"bi bi-arrow-left",onClick:function(){return k.goBack()}})})}),Object(h.jsx)(T,{tournamentId:w,setHideEditForm:_,previewBtn:[{name:"Premium",path:"/premium"},{name:"Classis 1",path:"/classic_1"},{name:"Classic 2",path:"/classic_2"},{name:"Classic 3",path:"/classic_3"},{name:"Classic 4",path:"/classic_4"},{name:"Classic 5",path:"/classic_5"},{name:"Classic 6",path:"/classic_6"},{name:"Classic 7",path:"/classic_7"},{name:"Classic 8",path:"/classic_8"},{name:"Classic 9",path:"/classic_9"},{name:"Classic 10",path:"/classic_10"},{name:"Classic 11",path:"/classic_11"},{name:"Classic 12",path:"/classic_12"},{name:"Classic 13",path:"/classic_13"},{name:"Classic 14",path:"/classic_14"},{name:"Classic 15",path:"/classic_15"},{name:"Classic 16",path:"/classic_16"},{name:"Classic 17",path:"/classic_17"}],dorpDownList:[{name:"Top 3",catPath:"/top_3",minTeam:2},{name:"Top 5",catPath:"/top_5",minTeam:4},{name:"Finalist",catPath:"/finalist",minTeam:1}],disableTop3Button:Z,data:L,setCertificateModal:U,setFixtureModal:K,mvpModal:W,setMvpModal:z,killLeadersModal:X,setKillLeadersModal:Y,listItems:[{catName:"Top 3",listNames:[{name:"Style 1",path:"/style_1"},{name:"Style 2",path:"/style_2"},{name:"Style 3",path:"/style_3"},{name:"Style 4",path:"/style_4"},{name:"Style 5",path:"/style_5"},{name:"Style 6",path:"/style_6"}]},{catName:"Top 5",listNames:[{name:"Style 1",path:"/style_1"},{name:"Style 2",path:"/style_2"},{name:"Style 3",path:"/style_3"},{name:"Style 4",path:"/style_4"},{name:"Style 5",path:"/style_5"},{name:"Style 6",path:"/style_6"}]},{catName:"Finalist",listNames:[{name:"Style 1",path:"/style_1"},{name:"Style 2",path:"/style_2"},{name:"Style 3",path:"/style_3"},{name:"Style 4",path:"/style_4"},{name:"Style 5",path:"/style_5"},{name:"Style 6",path:"/style_6"},{name:"Style 7",path:"/style_7"}]}],previewUrl:te,userData:b,bannerUrl:ae,fixtureModal:H,certificateModal:A}),Object(h.jsx)(I,{data:L,loading:O,count:0,tournamentId:w}),Object(h.jsx)(N,{notify:ce}),Object(h.jsx)(x,{data:L,notify:ce}),y&&Object(h.jsx)(S,{data:L,notify:ce}),Object(h.jsx)(C,{data:L,notify:ce})]}),Object(h.jsx)(o.a,{})]})}}}]);